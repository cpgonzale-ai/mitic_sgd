<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor Documental Unificado - Gobierno Nacional</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Estilos base y animaciones -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .animate-fadeIn { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONOS (SVG Components) ---
        const IconBase = ({ children, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>{children}</svg>
        );

        // Definimos los iconos individualmente para que coincidan con los nombres usados en los componentes
        const FileText = (p) => <IconBase {...p}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></IconBase>;
        const Search = (p) => <IconBase {...p}><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></IconBase>;
        const Plus = (p) => <IconBase {...p}><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></IconBase>;
        const Filter = (p) => <IconBase {...p}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></IconBase>;
        const Download = (p) => <IconBase {...p}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></IconBase>;
        const Upload = (p) => <IconBase {...p}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></IconBase>;
        const CheckCircle = (p) => <IconBase {...p}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const LinkIcon = (p) => <IconBase {...p}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></IconBase>;
        const FileCheck = (p) => <IconBase {...p}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="m9 15 2 2 4-4"/></IconBase>;
        const QrCode = (p) => <IconBase {...p}><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></IconBase>;
        const MoreVertical = (p) => <IconBase {...p}><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></IconBase>;
        const Clock = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>;
        const User = (p) => <IconBase {...p}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconBase>;
        const Building = (p) => <IconBase {...p}><rect x="4" y="2" width="16" height="20" rx="2" ry="2"/><line x1="9" y1="22" x2="9" y2="22"/><line x1="15" y1="22" x2="15" y2="22"/><line x1="12" y1="22" x2="12" y2="22"/><line x1="12" y1="2" x2="12" y2="22"/><line x1="4" y1="10" x2="20" y2="10"/><line x1="4" y1="14" x2="20" y2="14"/><line x1="4" y1="18" x2="20" y2="18"/></IconBase>;
        const ArrowRight = (p) => <IconBase {...p}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></IconBase>;
        const ArrowLeft = (p) => <IconBase {...p}><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></IconBase>;
        const ShieldCheck = (p) => <IconBase {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></IconBase>;
        const FolderOpen = (p) => <IconBase {...p}><path d="m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v2"/></IconBase>;
        const Edit = (p) => <IconBase {...p}><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></IconBase>;
        const Monitor = (p) => <IconBase {...p}><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></IconBase>;
        const X = (p) => <IconBase {...p}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></IconBase>;
        const Trash = (p) => <IconBase {...p}><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></IconBase>;
        const ExternalLink = (p) => <IconBase {...p}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></IconBase>;
        const Home = (p) => <IconBase {...p}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></IconBase>;
        const Shield = (p) => <IconBase {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></IconBase>;
        const CheckSquare = (p) => <IconBase {...p}><polyline points="9 11 12 14 22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></IconBase>;
        const Square = (p) => <IconBase {...p}><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/></IconBase>;
        const Settings = (p) => <IconBase {...p}><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></IconBase>;
        const ChevronDown = (p) => <IconBase {...p}><polyline points="6 9 12 15 18 9"/></IconBase>;
        const ChevronRight = (p) => <IconBase {...p}><polyline points="9 18 15 12 9 6"/></IconBase>;
        const PlusCircle = (p) => <IconBase {...p}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></IconBase>;
        const Save = (p) => <IconBase {...p}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></IconBase>;
        const Paperclip = (p) => <IconBase {...p}><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/></IconBase>;
        const Eye = (p) => <IconBase {...p}><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></IconBase>;
        const History = (p) => <IconBase {...p}><path d="M3 3v5h5"/><path d="M3.05 13A9 9 0 1 0 6 5.3L3 8"/><path d="M12 7v5l4 2"/></IconBase>;
        const AlertTriangle = (p) => <IconBase {...p}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></IconBase>;
        const Calendar = (p) => <IconBase {...p}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></IconBase>;

        // --- COMPONENTES AUXILIARES ---

        const SidebarItem = ({ id, icon: IconComp, label, active, onClick }) => (
            <button
                onClick={() => onClick(id)}
                className={`w-full flex items-center space-x-3 px-4 py-3 text-sm font-medium transition-colors ${
                    active 
                        ? 'bg-blue-900 text-white border-r-4 border-blue-400' 
                        : 'text-slate-400 hover:bg-slate-800 hover:text-white'
                }`}
            >
                <IconComp size={20} />
                <span>{label}</span>
            </button>
        );

        const Badge = ({ status }) => {
            const styles = {
                'Firmado': 'bg-green-100 text-green-800 border-green-200',
                'Borrador': 'bg-yellow-100 text-yellow-800 border-yellow-200',
                'Validado': 'bg-blue-100 text-blue-800 border-blue-200',
                'Guardado': 'bg-blue-50 text-blue-800 border-blue-200',
                'Vigente': 'bg-green-100 text-green-800 border-green-200',
                'Activo': 'bg-green-100 text-green-800 border-green-200',
                'Inactivo': 'bg-red-100 text-red-800 border-red-200'
            };
            return (
                <span className={`px-2 py-1 rounded-full text-xs font-semibold border ${styles[status] || 'bg-gray-100'}`}>
                    {status}
                </span>
            );
        };

        // --- VISTAS ---

        const RepositoryView = ({ setActiveTab, documents, setDocuments }) => {
            const [searchQuery, setSearchQuery] = useState('');
            const [viewDoc, setViewDoc] = useState(null);
            const [editDoc, setEditDoc] = useState(null);
            const [deleteDoc, setDeleteDoc] = useState(null);

            const handleUpdateDoc = () => {
                if (editDoc) {
                    setDocuments(documents.map(d => d.id === editDoc.id ? editDoc : d));
                    setEditDoc(null);
                }
            };

            const handleDeleteConfirm = () => {
                if (deleteDoc) {
                    setDocuments(documents.filter(d => d.id !== deleteDoc.id));
                    setDeleteDoc(null);
                }
            };

            return (
                <div className="space-y-6 animate-fadeIn relative">
                    <div className="flex justify-between items-center">
                        <div>
                            <h2 className="text-2xl font-bold text-slate-800">Repositorio Central</h2>
                            <p className="text-slate-500">Gestión de documentos nativos digitales</p>
                        </div>
                        <button onClick={() => setActiveTab('create')} className="bg-blue-900 hover:bg-blue-800 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition shadow-sm">
                            <Plus size={18} />
                            <span>Nuevo Documento</span>
                        </button>
                    </div>

                    <div className="bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-wrap gap-4 items-center">
                        <div className="flex-1 relative">
                            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400" size={20} />
                            <input type="text" placeholder="Buscar por título, ID o metadatos..." className="w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />
                        </div>
                        <div className="flex space-x-2">
                            <select className="px-4 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-700 focus:outline-none">
                                <option>Todos los Tipos</option>
                                <option>Resolución</option>
                                <option>Informe Técnico</option>
                            </select>
                            <button className="p-2 border border-slate-300 rounded-lg text-slate-600 hover:bg-slate-50"><Filter size={20} /></button>
                        </div>
                    </div>

                    <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <table className="w-full text-left">
                            <thead className="bg-slate-50 text-slate-600 text-sm border-b border-slate-200">
                                <tr>
                                    <th className="px-6 py-4 font-semibold">Documento</th>
                                    <th className="px-6 py-4 font-semibold">Autor</th>
                                    <th className="px-6 py-4 font-semibold">Fecha</th>
                                    <th className="px-6 py-4 font-semibold">Integración Digitalia</th>
                                    <th className="px-6 py-4 font-semibold">Estado</th>
                                    <th className="px-6 py-4 text-right">Acciones</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-slate-100">
                                {documents.filter(d => d.title.toLowerCase().includes(searchQuery.toLowerCase())).map((doc) => (
                                    <tr key={doc.id} className="hover:bg-slate-50 transition-colors group">
                                        <td className="px-6 py-4">
                                            <div className="flex items-start space-x-3">
                                                <div className="p-2 bg-blue-50 text-blue-700 rounded-lg"><FileText size={20} /></div>
                                                <div>
                                                    <p className="font-medium text-slate-900">{doc.title}</p>
                                                    <p className="text-xs text-slate-500 font-mono">{doc.id} • {doc.type}</p>
                                                </div>
                                            </div>
                                        </td>
                                        <td className="px-6 py-4 text-sm text-slate-600">
                                            <div className="flex items-center space-x-2"><User size={14} /><span>{doc.author}</span></div>
                                        </td>
                                        <td className="px-6 py-4 text-sm text-slate-600">
                                            <div className="flex items-center space-x-2"><Clock size={14} /><span>{doc.date}</span></div>
                                        </td>
                                        <td className="px-6 py-4">
                                            {doc.digitaliaId ? (
                                                <span className="flex items-center space-x-1 text-xs font-medium text-indigo-700 bg-indigo-50 px-2 py-1 rounded border border-indigo-100 w-fit">
                                                    <LinkIcon size={12} /><span>Vinculado: {doc.digitaliaId}</span>
                                                </span>
                                            ) : (
                                                <span className="text-xs text-slate-400 italic">Sin vincular</span>
                                            )}
                                        </td>
                                        <td className="px-6 py-4"><Badge status={doc.status} /></td>
                                        <td className="px-6 py-4 text-right">
                                            <div className="flex justify-end space-x-1">
                                                <button onClick={() => setViewDoc(doc)} className="text-slate-400 hover:text-blue-600 p-1 transition-colors" title="Visualizar"><Eye size={18} /></button>
                                                <button onClick={() => setEditDoc({...doc})} className="text-slate-400 hover:text-amber-600 p-1 transition-colors" title="Editar"><Edit size={18} /></button>
                                                <button onClick={() => setDeleteDoc(doc)} className="text-slate-400 hover:text-red-600 p-1 transition-colors" title="Eliminar"><Trash size={18} /></button>
                                            </div>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>

                    {/* Modales de Repositorio */}
                    {viewDoc && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-fadeIn">
                            <div className="bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden">
                                <div className="p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                                    <div className="flex items-center gap-3">
                                        <div className="bg-blue-100 p-2 rounded-full text-blue-600"><FileText size={24} /></div>
                                        <div><h3 className="font-bold text-lg text-slate-800">{viewDoc.title}</h3><p className="text-xs text-slate-500 font-mono">{viewDoc.id}</p></div>
                                    </div>
                                    <button onClick={() => setViewDoc(null)} className="text-slate-400 hover:text-slate-600"><X size={24} /></button>
                                </div>
                                <div className="p-6 space-y-6">
                                    <div className="grid grid-cols-2 gap-6">
                                        <div><p className="text-xs text-slate-500 uppercase font-semibold mb-1">Tipo Documental</p><p className="text-slate-800 font-medium">{viewDoc.type}</p></div>
                                        <div><p className="text-xs text-slate-500 uppercase font-semibold mb-1">Estado Actual</p><Badge status={viewDoc.status} /></div>
                                        <div><p className="text-xs text-slate-500 uppercase font-semibold mb-1">Autor</p><p className="text-slate-800">{viewDoc.author}</p></div>
                                        <div><p className="text-xs text-slate-500 uppercase font-semibold mb-1">Fecha</p><p className="text-slate-800">{viewDoc.date}</p></div>
                                    </div>
                                    <div className="bg-indigo-50 border border-indigo-100 rounded-lg p-4">
                                        <h4 className="font-bold text-indigo-900 text-sm mb-2 flex items-center gap-2"><LinkIcon size={16} />Integración Digitalia</h4>
                                        {viewDoc.digitaliaId ? <span className="text-indigo-700 text-sm">Vinculado al expediente: <strong>{viewDoc.digitaliaId}</strong></span> : <p className="text-indigo-400 text-sm italic">Este documento no está vinculado a ningún expediente.</p>}
                                    </div>
                                    <div>
                                        <h4 className="font-bold text-slate-800 mb-3 flex items-center gap-2 pb-2 border-b border-slate-100"><History size={18} className="text-slate-500" />Historial de Auditoría</h4>
                                        <div className="bg-slate-50 border border-slate-200 rounded-lg overflow-hidden">
                                            <table className="w-full text-left text-sm">
                                                <thead className="bg-slate-100 text-slate-600"><tr><th className="px-4 py-2 font-medium">Fecha</th><th className="px-4 py-2 font-medium">Usuario</th><th className="px-4 py-2 font-medium">Acción</th></tr></thead>
                                                <tbody className="divide-y divide-slate-200">
                                                    <tr><td className="px-4 py-2 text-slate-600">{viewDoc.date} 09:00</td><td className="px-4 py-2 text-slate-800 font-medium">rantola</td><td className="px-4 py-2 text-slate-600">Creación</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div className="bg-slate-50 p-4 flex justify-end gap-3 border-t border-slate-200">
                                    <button onClick={() => setViewDoc(null)} className="bg-slate-800 text-white px-6 py-2 rounded-lg hover:bg-slate-900 font-medium">Cerrar</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {editDoc && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-fadeIn">
                            <div className="bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden">
                                <div className="p-6 border-b border-slate-100 flex justify-between items-center">
                                    <h3 className="font-bold text-lg text-slate-800">Editar Documento</h3>
                                    <button onClick={() => setEditDoc(null)} className="text-slate-400 hover:text-slate-600"><X size={24} /></button>
                                </div>
                                <div className="p-6 space-y-4">
                                    <div><label className="block text-sm font-medium text-slate-700 mb-1">Título</label><input type="text" value={editDoc.title} onChange={(e) => setEditDoc({...editDoc, title: e.target.value})} className="w-full border border-slate-300 rounded-lg px-3 py-2" /></div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div><label className="block text-sm font-medium text-slate-700 mb-1">Etapa</label><select value={editDoc.status} onChange={(e) => setEditDoc({...editDoc, status: e.target.value})} className="w-full border border-slate-300 rounded-lg px-3 py-2 bg-white"><option>Borrador</option><option>Firmado</option><option>Validado</option></select></div>
                                        <div><label className="block text-sm font-medium text-slate-700 mb-1">Estado</label><select value={editDoc.activeState || 'Activo'} onChange={(e) => setEditDoc({...editDoc, activeState: e.target.value})} className="w-full border border-slate-300 rounded-lg px-3 py-2 bg-white"><option value="Activo">Activo</option><option value="Inactivo">Inactivo</option></select></div>
                                    </div>
                                    <div><label className="block text-sm font-medium text-slate-700 mb-1">Autor Responsable</label><input type="text" value={editDoc.author} onChange={(e) => setEditDoc({...editDoc, author: e.target.value})} className="w-full border border-slate-300 rounded-lg px-3 py-2" /></div>
                                </div>
                                <div className="bg-slate-50 p-4 flex justify-end space-x-3 border-t border-slate-100">
                                    <button onClick={() => setEditDoc(null)} className="text-slate-600 font-medium px-4 py-2 hover:bg-slate-200 rounded-lg">Cancelar</button>
                                    <button onClick={handleUpdateDoc} className="bg-blue-900 text-white px-4 py-2 rounded-lg hover:bg-blue-800 font-medium flex items-center gap-2"><Save size={18} />Guardar</button>
                                </div>
                            </div>
                        </div>
                    )}

                     {deleteDoc && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-fadeIn">
                            <div className="bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden p-6 text-center">
                                <div className="mx-auto bg-red-100 w-16 h-16 rounded-full flex items-center justify-center text-red-600 mb-4"><AlertTriangle size={32} /></div>
                                <h3 className="font-bold text-lg text-slate-800 mb-2">¿Eliminar Documento?</h3>
                                <p className="text-slate-600 text-sm mb-4">Está a punto de eliminar <strong>"{deleteDoc.title}"</strong>.</p>
                                <div className="flex space-x-3 justify-center">
                                    <button onClick={() => setDeleteDoc(null)} className="bg-white border border-slate-300 text-slate-700 px-4 py-2 rounded-lg hover:bg-slate-50 font-medium">Cancelar</button>
                                    <button onClick={handleDeleteConfirm} className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 font-medium flex items-center gap-2"><Trash size={18} />Eliminar</button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const ValidateDocumentView = () => {
            const [code, setCode] = useState('');
            const [validationResult, setValidationResult] = useState(null);
            const [loading, setLoading] = useState(false);

            const handleValidate = (e) => {
                e.preventDefault();
                if (!code) return;
                setLoading(true);
                setValidationResult(null);
                setTimeout(() => {
                    setLoading(false);
                    setValidationResult({ valid: true, docId: 'DOC-2026-001', title: 'Resolución Ministerial 45/2026', date: '2026-02-02', author: 'Rodrigo Antola', hash: '8a7b9c1d2e3f4g5h6i7j8k9l0m...', status: 'Vigente' });
                }, 1500);
            };

            return (
                <div className="max-w-3xl mx-auto space-y-8 animate-fadeIn">
                    <div className="text-center space-y-2"><h2 className="text-2xl font-bold text-slate-800">Validación de Documentos</h2><p className="text-slate-500">Verifique la autenticidad e integridad de los documentos emitidos.</p></div>
                    <div className="bg-white p-8 rounded-xl shadow-lg border border-slate-200">
                        <form onSubmit={handleValidate} className="space-y-4">
                            <label className="block text-sm font-medium text-slate-700">Código de Verificación (CVD) o Hash</label>
                            <div className="flex gap-4">
                                <input type="text" value={code} onChange={(e) => setCode(e.target.value)} placeholder="Ej: 8a7b9c..." className="flex-1 border border-slate-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono text-sm" />
                                <button type="submit" disabled={loading || !code} className={`px-6 py-3 rounded-lg text-white font-medium flex items-center space-x-2 min-w-[140px] justify-center transition-colors ${loading || !code ? 'bg-slate-400 cursor-not-allowed' : 'bg-blue-900 hover:bg-blue-800'}`}>{loading ? '...' : <span>Validar</span>}</button>
                            </div>
                        </form>
                        {validationResult && (
                            <div className="mt-8 border-t border-slate-100 pt-6 animate-fadeIn">
                                <div className={`p-4 rounded-lg flex items-center space-x-3 mb-6 ${validationResult.valid ? 'bg-green-50 border border-green-200 text-green-800' : 'bg-red-50'}`}><CheckCircle size={24} /><div><p className="font-bold text-lg">Documento Auténtico</p></div></div>
                                {validationResult.valid && (
                                    <div className="grid grid-cols-2 gap-6 text-sm">
                                        <div className="space-y-4"><div><span className="block text-xs text-slate-500 uppercase font-semibold">Documento</span><span className="block font-medium text-slate-800">{validationResult.title}</span></div></div>
                                        <div className="space-y-4"><div><span className="block text-xs text-slate-500 uppercase font-semibold">Estado</span><Badge status={validationResult.status} /></div></div>
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const AdminTypesView = () => {
            const [docTypes, setDocTypes] = useState([
                { id: 1, name: 'Resolución Ministerial', code: 'RES', status: 'Activo', format: 'RES-12021001-0001', hasTemplate: true },
                { id: 2, name: 'Informe Técnico', code: 'INF', status: 'Activo', format: 'INF-12021001-0001', hasTemplate: true }
            ]);
            const [isCreating, setIsCreating] = useState(false);
            const [allSystemFields] = useState([ { id: 1, label: 'Asunto Principal' }, { id: 3, label: 'Fecha de Vigencia' }, { id: 5, label: 'Observaciones' }, { id: 9, label: 'Título del Documento' }, { id: 10, label: 'Fecha del Documento' }, { id: 11, label: 'Tipo de Visibilidad' } ]);
            const [availableFields, setAvailableFields] = useState([...allSystemFields]);
            const [assignedFields, setAssignedFields] = useState([]);
            const [newType, setNewType] = useState({ name: '', code: '', template: null });
            
            // Estados para Modales de Administración
            const [viewType, setViewType] = useState(null);
            const [editType, setEditType] = useState(null);
            const [deleteType, setDeleteType] = useState(null);

            const moveField = (field, direction) => {
                if (direction === 'toRight') {
                    setAvailableFields(availableFields.filter(f => f.id !== field.id));
                    setAssignedFields([...assignedFields, field]);
                } else {
                    setAssignedFields(assignedFields.filter(f => f.id !== field.id));
                    setAvailableFields([...availableFields, field]);
                }
            };
            const resetFields = () => { setAvailableFields([...allSystemFields]); setAssignedFields([]); };
            const handleSave = () => { if (newType.name && newType.code) { setDocTypes([...docTypes, { id: docTypes.length + 1, ...newType, status: 'Activo', format: `${newType.code}-12021001-0001`, hasTemplate: !!newType.template, fields: assignedFields }]); setIsCreating(false); setNewType({ name: '', code: '', template: null }); resetFields(); } };

            return (
                <div className="space-y-6 animate-fadeIn relative">
                    <div className="flex justify-between items-center">
                        <div><h2 className="text-2xl font-bold text-slate-800">Administración de Tipos</h2></div>
                        {!isCreating && <button onClick={() => { setIsCreating(true); resetFields(); }} className="bg-blue-900 hover:bg-blue-800 text-white px-4 py-2 rounded-lg flex items-center space-x-2"><PlusCircle size={18} /><span>Crear Tipo</span></button>}
                    </div>

                    {isCreating ? (
                        <div className="bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-4xl mx-auto">
                            <div className="flex justify-between items-center mb-6 border-b border-slate-100 pb-4"><h3 className="text-lg font-semibold text-slate-800">Nuevo Tipo de Documento</h3><button onClick={() => setIsCreating(false)} className="text-slate-400 hover:text-slate-600"><X size={20} /></button></div>
                            <div className="grid grid-cols-2 gap-8">
                                <div className="space-y-4">
                                    <div><label className="block text-sm font-medium text-slate-700 mb-1">Nombre</label><input type="text" value={newType.name} onChange={(e) => { const name = e.target.value; setNewType({ ...newType, name: name, code: name.slice(0, 3).toUpperCase() }) }} className="w-full border border-slate-300 rounded-lg px-3 py-2" /></div>
                                    <div><label className="block text-sm font-medium text-slate-700 mb-1">Código</label><input type="text" value={newType.code} onChange={(e) => setNewType({...newType, code: e.target.value.toUpperCase()})} className="w-full border border-slate-300 rounded-lg px-3 py-2 bg-slate-50" /><p className="text-xs text-slate-400 mt-1">Formato: {newType.code ? `${newType.code}-12021001-0001` : 'CODIGO-12021001-0001'}</p></div>
                                    <div><label className="block text-sm font-medium text-slate-700 mb-1">Plantilla (.docx)</label><div className="border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:bg-slate-50 transition cursor-pointer" onClick={() => document.getElementById('template-upload').click()}><input id="template-upload" type="file" className="hidden" accept=".docx" onChange={(e) => { if (e.target.files?.[0]) setNewType({...newType, template: e.target.files[0].name}); }} />{newType.template ? <span className="text-blue-600 font-medium">{newType.template}</span> : <div className="space-y-1"><div className="mx-auto bg-slate-100 w-10 h-10 rounded-full flex items-center justify-center text-slate-400"><Upload size={20} /></div><p className="text-sm text-slate-500">Subir .docx</p></div>}</div></div>
                                </div>
                                <div className="space-y-2">
                                    <label className="block text-sm font-medium text-slate-700 mb-2">Campos (Metadatos)</label>
                                    <div className="flex gap-2 h-64">
                                        <div className="flex-1 border border-slate-300 rounded-lg flex flex-col"><div className="bg-slate-100 p-2 text-xs font-semibold text-center">Disponibles</div><div className="flex-1 overflow-y-auto p-2 space-y-1">{availableFields.map(field => (<div key={field.id} onClick={() => moveField(field, 'toRight')} className="p-2 bg-white border border-slate-100 rounded text-sm cursor-pointer hover:bg-blue-50 flex justify-between"><span>{field.label}</span><ArrowRight size={14} className="text-slate-300"/></div>))}</div></div>
                                        <div className="flex-1 border border-blue-200 rounded-lg flex flex-col bg-blue-50/30"><div className="bg-blue-100 p-2 text-xs font-semibold text-blue-800 text-center">Asociados</div><div className="flex-1 overflow-y-auto p-2 space-y-1">{assignedFields.map(field => (<div key={field.id} onClick={() => moveField(field, 'toLeft')} className="p-2 bg-white border border-blue-100 rounded text-sm cursor-pointer hover:bg-red-50 flex justify-between"><ArrowLeft size={14} className="text-blue-300"/><span>{field.label}</span></div>))}</div></div>
                                    </div>
                                </div>
                            </div>
                            <div className="pt-6 flex justify-end space-x-3 border-t border-slate-100 mt-6"><button onClick={() => setIsCreating(false)} className="px-4 py-2 border border-slate-300 rounded-lg text-slate-700">Cancelar</button><button onClick={handleSave} className="bg-blue-900 text-white px-4 py-2 rounded-lg flex items-center space-x-2"><Save size={18} /><span>Guardar</span></button></div>
                        </div>
                    ) : (
                        <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                             <table className="w-full text-left"><thead className="bg-slate-50 text-slate-600 text-sm border-b border-slate-200"><tr><th className="px-6 py-4">Nombre</th><th className="px-6 py-4">Código</th><th className="px-6 py-4">Formato</th><th className="px-6 py-4">Acciones</th></tr></thead>
                             <tbody className="divide-y divide-slate-100">{docTypes.map(t => (
                                 <tr key={t.id} className="hover:bg-slate-50">
                                     <td className="px-6 py-4">{t.name}</td><td className="px-6 py-4 font-mono text-sm">{t.code}</td><td className="px-6 py-4 font-mono text-sm">{t.format}</td>
                                     <td className="px-6 py-4 text-right">
                                        <div className="flex justify-end space-x-1">
                                            <button onClick={() => setViewType(t)} className="p-1 text-slate-400 hover:text-blue-600"><Eye size={18} /></button>
                                            <button onClick={() => setEditType(t)} className="p-1 text-slate-400 hover:text-amber-600"><Edit size={18} /></button>
                                            <button onClick={() => setDeleteType(t)} className="p-1 text-slate-400 hover:text-red-600"><Trash size={18} /></button>
                                        </div>
                                     </td>
                                 </tr>))}
                             </tbody></table>
                        </div>
                    )}
                    
                     {/* Modales Admin */}
                    {viewType && <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div className="bg-white p-6 rounded-lg w-96"><h3>{viewType.name}</h3><p className="mt-2 text-sm text-slate-500">Código: {viewType.code}</p><div className="mt-4 flex justify-end"><button onClick={() => setViewType(null)} className="px-4 py-2 bg-slate-200 rounded">Cerrar</button></div></div></div>}
                    {editType && <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div className="bg-white p-6 rounded-lg w-96"><h3>Editar: {editType.name}</h3><p className="text-sm mt-2">Funcionalidad de edición completa en versión React</p><div className="mt-4 flex justify-end"><button onClick={() => setEditType(null)} className="px-4 py-2 bg-slate-200 rounded">Cerrar</button></div></div></div>}
                    {deleteType && <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div className="bg-white p-6 rounded-lg w-96"><h3>¿Eliminar {deleteType.name}?</h3><div className="mt-4 flex justify-end gap-2"><button onClick={() => setDeleteType(null)} className="px-4 py-2 bg-slate-200 rounded">Cancelar</button><button className="px-4 py-2 bg-red-600 text-white rounded">Eliminar</button></div></div></div>}
                </div>
            );
        };

        const CreateDocumentView = ({ setActiveTab, documents, setDocuments }) => {
            const [step, setStep] = useState(1);
            const [creationMode, setCreationMode] = useState('word');
            const [selectedTemplate, setSelectedTemplate] = useState(null);
            const [isSaved, setIsSaved] = useState(false);
            const [showDigitaliaModal, setShowDigitaliaModal] = useState(false);
            const [relatedTramites, setRelatedTramites] = useState([]);
            const [digitaliaSearch, setDigitaliaSearch] = useState('');
            const [selectedDigitaliaExp, setSelectedDigitaliaExp] = useState(null);
             const [formData, setFormData] = useState({ title: '', date: new Date().toISOString().split('T')[0], responsible: 'Cynthia Gonzalez', visibility: 'Público', content: 'Se procede a la firma...' });

            const handleSaveRepository = () => { setIsSaved(true); setDocuments(prev => [{ id: `DOC-${Date.now()}`, title: creationMode === 'form' ? formData.title : `${selectedTemplate} N° 2026/45`, type: selectedTemplate || 'Documento', author: formData.responsible, date: formData.date, status: 'Guardado', digitaliaId: null }, ...prev]); };
            const handleAddTramite = () => { if (selectedDigitaliaExp && !relatedTramites.find(t => t.id === selectedDigitaliaExp.id)) { setRelatedTramites([...relatedTramites, selectedDigitaliaExp]); setSelectedDigitaliaExp(null); setDigitaliaSearch(''); } };
            const handleSaveRelations = () => { setShowDigitaliaModal(false); if (relatedTramites.length > 0) alert(`Vinculados ${relatedTramites.length} trámites.`); };

            return (
                <div className="max-w-4xl mx-auto space-y-8 animate-fadeIn">
                     <div className="mb-8"><button onClick={() => setActiveTab('repository')} className="text-sm text-slate-500 hover:text-blue-900 mb-2 flex items-center">← Volver al repositorio</button><h2 className="text-2xl font-bold text-slate-800">Generador de Documentos (GDL)</h2></div>
                     {step === 1 && (
                         <div className="bg-white p-8 rounded-xl shadow-lg border border-slate-200 text-center"><h3 className="text-lg font-semibold mb-4">1. Seleccione método</h3><div className="flex space-x-4"><button onClick={() => {setCreationMode('word'); setStep(2);}} className="flex-1 p-4 border rounded hover:bg-slate-50">Plantilla Word</button><button onClick={() => {setCreationMode('form'); setStep(2);}} className="flex-1 p-4 border rounded hover:bg-slate-50">Formulario Web</button></div></div>
                     )}
                     {step === 2 && (
                         <div className="bg-white p-8 rounded-xl shadow-lg border border-slate-200"><h3 className="text-lg font-semibold mb-4">2. Datos</h3>
                             {creationMode === 'form' ? (
                                <div className="space-y-4"><div><label className="block text-sm">Título</label><input type="text" value={formData.title} onChange={e => setFormData({...formData, title: e.target.value})} className="w-full border p-2 rounded"/></div><div className="flex justify-end"><button onClick={() => setStep(3)} className="bg-blue-900 text-white px-4 py-2 rounded">Generar</button></div></div>
                             ) : (
                                <div className="text-center"><p className="mb-4">Seleccione Tipo:</p><div className="grid grid-cols-2 gap-2">{['Resolución', 'Informe'].map(t => <button key={t} onClick={() => {setSelectedTemplate(t); setStep(3);}} className="p-3 border rounded hover:bg-slate-50">{t}</button>)}</div></div>
                             )}
                         </div>
                     )}
                     {step === 3 && (
                         <div className="bg-white p-8 rounded-xl shadow-lg border border-slate-200"><h3 className="text-lg font-semibold mb-4">3. Validación</h3><div className="flex justify-between"><button onClick={handleSaveRepository} disabled={isSaved} className={`px-4 py-2 rounded ${isSaved ? 'bg-green-100 text-green-800' : 'bg-blue-900 text-white'}`}>{isSaved ? 'Guardado' : 'Guardar'}</button><button onClick={() => setShowDigitaliaModal(true)} disabled={!isSaved} className="px-4 py-2 border rounded hover:bg-slate-50">Digitalia</button></div></div>
                     )}
                     {showDigitaliaModal && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50"><div className="bg-white rounded-xl p-6 w-full max-w-lg"><h3 className="font-bold text-lg mb-4">Digitalia</h3><div className="flex gap-2 mb-4"><input type="text" value={digitaliaSearch} onChange={e => setDigitaliaSearch(e.target.value)} className="flex-1 border p-2 rounded" placeholder="EXP-..."/><button onClick={() => { if(digitaliaSearch) setSelectedDigitaliaExp({id: digitaliaSearch, title: 'Trámite Simulado'}); }} className="bg-blue-900 text-white px-3 rounded">Buscar</button></div>{selectedDigitaliaExp && <div className="bg-blue-50 p-2 mb-4 rounded flex justify-between"><span>{selectedDigitaliaExp.id}</span><button onClick={handleAddTramite} className="text-blue-700 font-bold">Agregar</button></div>}<div className="mb-4 text-sm text-slate-500">Vinculados: {relatedTramites.length}</div><div className="flex justify-end gap-2"><button onClick={() => setShowDigitaliaModal(false)} className="text-slate-600">Cerrar</button><button onClick={handleSaveRelations} className="bg-blue-900 text-white px-4 py-2 rounded">Confirmar</button></div></div></div>
                     )}
                </div>
            );
        };

        const IntegrationView = ({ documents }) => {
            const [searchTerm, setSearchTerm] = useState('');
            const [searchResults, setSearchResults] = useState([]);
            const [selectedExpediente, setSelectedExpediente] = useState(null);
            const [selectedDocs, setSelectedDocs] = useState([]);
            const [docSearchTerm, setDocSearchTerm] = useState('');
            const [showSummary, setShowSummary] = useState(false);

            const handleSearch = () => { if (searchTerm.length > 3) setSearchResults([{ id: 'EXP-2026-8812', title: 'Solicitud de Insumos - Dpto. IT', area: 'Tecnología' }, { id: 'EXP-2026-9923', title: 'Auditoría Financiera Q1', area: 'Finanzas' }]); };
            const toggleDocSelection = (id) => { setSelectedDocs(prev => prev.includes(id) ? prev.filter(d => d !== id) : [...prev, id]); };
            
            const filteredDocs = documents.filter(doc => doc.title.toLowerCase().includes(docSearchTerm.toLowerCase()));

            if (showSummary) {
                return (
                    <div className="space-y-6 animate-fadeIn">
                        <div className="bg-green-50 border border-green-200 p-6 rounded-xl flex items-center space-x-4"><div className="bg-green-100 p-3 rounded-full text-green-700"><CheckCircle size={32} /></div><div><h3 className="text-xl font-bold text-green-900">¡Vinculación Exitosa!</h3><p className="text-green-700">Se han asociado correctamente {selectedDocs.length} documentos.</p></div></div>
                        <div className="flex justify-end"><button onClick={() => { setShowSummary(false); setSelectedExpediente(null); setSelectedDocs([]); }} className="bg-blue-900 text-white px-6 py-2 rounded flex items-center gap-2"><span>Nueva Vinculación</span><ArrowRight size={18}/></button></div>
                    </div>
                );
            }

            return (
                <div className="space-y-6 animate-fadeIn">
                    <div className="mb-6"><h2 className="text-2xl font-bold text-slate-800">Integración con Digitalia</h2><p className="text-slate-500">Vincular documentos múltiples.</p></div>
                    <div className="grid grid-cols-3 gap-6">
                        <div className="col-span-2 space-y-6">
                            <div className="bg-white rounded-xl p-6 shadow-sm border border-slate-200 min-h-[500px] flex flex-col">
                                {!selectedExpediente ? (
                                    <div className="space-y-4">
                                        <label className="block text-sm font-medium">1. Buscar Expediente</label>
                                        <div className="flex gap-2"><input type="text" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} className="flex-1 border p-2 rounded" placeholder="EXP-..." /><button onClick={handleSearch} className="bg-indigo-600 text-white px-4 rounded">Buscar</button></div>
                                        {searchResults.map(res => (
                                            <button key={res.id} onClick={() => setSelectedExpediente(res)} className="w-full text-left p-3 hover:bg-indigo-50 border rounded mb-2"><div><p className="font-bold text-indigo-900">{res.id}</p><p className="text-sm">{res.title}</p></div></button>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="flex-1 flex flex-col">
                                        <div className="bg-indigo-50 p-4 rounded mb-4 flex justify-between"><div><p className="text-xs text-indigo-600 uppercase">Expediente</p><p className="font-bold text-indigo-900">{selectedExpediente.id}</p></div><button onClick={() => setSelectedExpediente(null)} className="text-slate-400"><X size={20}/></button></div>
                                        <label className="block text-sm font-medium mb-2">2. Seleccione Documentos ({selectedDocs.length})</label>
                                        <input type="text" placeholder="Filtrar documentos..." value={docSearchTerm} onChange={e => setDocSearchTerm(e.target.value)} className="w-full border p-2 rounded mb-2 text-sm"/>
                                        <div className="flex-1 overflow-y-auto border rounded">
                                            {filteredDocs.map(doc => (
                                                <div key={doc.id} onClick={() => toggleDocSelection(doc.id)} className={`p-3 flex items-center gap-3 cursor-pointer ${selectedDocs.includes(doc.id) ? 'bg-blue-50' : 'hover:bg-slate-50'}`}>
                                                    <div className={selectedDocs.includes(doc.id) ? 'text-blue-600' : 'text-slate-300'}>{selectedDocs.includes(doc.id) ? <CheckSquare size={20}/> : <Square size={20}/>}</div>
                                                    <div><p className="font-medium text-sm">{doc.title}</p><p className="text-xs text-slate-500">{doc.id}</p></div>
                                                </div>
                                            ))}
                                        </div>
                                        <div className="mt-4 flex justify-end gap-2">
                                            <button onClick={() => setSelectedExpediente(null)} className="text-slate-600 px-4">Cancelar</button>
                                            <button onClick={() => setShowSummary(true)} disabled={selectedDocs.length === 0} className={`px-6 py-2 rounded text-white ${selectedDocs.length === 0 ? 'bg-slate-300' : 'bg-green-600'}`}>Confirmar</button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                        <div className="col-span-1"><div className="bg-white p-6 rounded-xl border border-slate-200"><h3 className="font-semibold mb-4 flex items-center gap-2"><ShieldCheck className="text-green-600" size={20}/>Estado</h3><div className="text-sm space-y-2"><div className="flex justify-between"><span>API Digitalia:</span><span className="text-green-600">Conectado</span></div></div></div></div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('repository');
            const [isAdminMenuOpen, setIsAdminMenuOpen] = useState(false);
            const [documents, setDocuments] = useState([
                { id: 'DOC-2026-001', title: 'Resolución Ministerial 45/2026', type: 'Resolución', author: 'Rodrigo Antola', date: '2026-02-02', status: 'Firmado', digitaliaId: 'EXP-9923' },
                { id: 'DOC-2026-002', title: 'Informe Técnico Auditoría', type: 'Informe Técnico', author: 'Cynthia Gonzalez', date: '2026-02-01', status: 'Borrador', digitaliaId: null }
            ]);

            return (
                <div className="flex h-screen bg-slate-100 font-sans text-slate-900">
                    <div className="w-64 bg-slate-900 text-white flex flex-col shadow-xl z-20">
                        <div className="p-6 border-b border-slate-800"><div className="flex items-center space-x-3"><div className="bg-white/10 p-2 rounded-lg"><Building size={24} className="text-blue-400" /></div><div><h1 className="font-bold text-lg leading-tight">Gestión Documental</h1><p className="text-xs text-slate-400">Gobierno Nacional</p></div></div></div>
                        <nav className="flex-1 py-6 space-y-1">
                            <SidebarItem id="repository" icon={FolderOpen} label="Repositorio" active={activeTab === 'repository'} onClick={setActiveTab} />
                            <SidebarItem id="create" icon={Plus} label="Nuevo Documento" active={activeTab === 'create'} onClick={setActiveTab} />
                            <SidebarItem id="validate" icon={Shield} label="Validar Documento" active={activeTab === 'validate'} onClick={setActiveTab} />
                            <SidebarItem id="integration" icon={LinkIcon} label="Digitalia" active={activeTab === 'integration'} onClick={setActiveTab} />
                            <div><button onClick={() => setIsAdminMenuOpen(!isAdminMenuOpen)} className="w-full flex items-center justify-between px-4 py-3 text-sm font-medium text-slate-400 hover:bg-slate-800 hover:text-white"><div className="flex items-center space-x-3"><Settings size={20} /><span>Administración</span></div>{isAdminMenuOpen ? <ChevronDown size={16} /> : <ChevronRight size={16} />}</button>{isAdminMenuOpen && <div className="bg-slate-950 py-1"><button onClick={() => setActiveTab('admin_types')} className="w-full flex items-center space-x-3 pl-12 pr-4 py-2 text-sm font-medium text-slate-500 hover:text-white"><span>Tipos de Documento</span></button></div>}</div>
                        </nav>
                        <div className="p-4 bg-slate-800 m-4 rounded-xl"><div className="flex items-center space-x-3 mb-2"><div className="bg-blue-500 rounded-full p-1"><User size={14} className="text-white" /></div><div><p className="text-sm font-medium">Cynthia Gonzalez</p><p className="text-xs text-slate-400">Analista</p></div></div></div>
                    </div>
                    <div className="flex-1 flex flex-col overflow-hidden">
                        <header className="bg-white shadow-sm border-b border-slate-200 px-8 py-4 flex justify-between items-center z-10"><div><h2 className="text-xl font-semibold text-slate-800">{activeTab === 'repository' ? 'Bandeja de Documentos' : activeTab === 'create' ? 'Generación de Documentos' : activeTab === 'validate' ? 'Validación Pública' : activeTab === 'integration' ? 'Interoperabilidad' : 'Administración'}</h2></div><div className="flex items-center space-x-4"><div className="text-right hidden md:block"><p className="text-xs text-slate-500">Última sincronización</p><p className="text-sm font-medium text-slate-700">Hoy, 10:00 AM</p></div></div></header>
                        <main className="flex-1 overflow-auto p-8">
                            {activeTab === 'repository' && <RepositoryView setActiveTab={setActiveTab} documents={documents} setDocuments={setDocuments} />}
                            {activeTab === 'create' && <CreateDocumentView setActiveTab={setActiveTab} documents={documents} setDocuments={setDocuments} />}
                            {activeTab === 'validate' && <ValidateDocumentView />}
                            {activeTab === 'integration' && <IntegrationView documents={documents} />}
                            {activeTab === 'admin_types' && <AdminTypesView />}
                        </main>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
